<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link href="css/izgled.css" rel="stylesheet">
    <script src="js/funkcionalnost.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="css/animate.css">
    <title>Sah</title>
</head>
<body>

<table id="tabla">
    <tr>
        <td onclick="slanje(this)"><img src="img/crni_top.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_konj.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_lovac.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_kralj.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_kraljica.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_lovac.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_konj.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_top.png" class="figura"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/crni_pijun.png" class="figura"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
        <td onclick="slanje(this)"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura" ></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura" ></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_pijun.png" class="figura"></td>
    </tr>
    <tr>
        <td onclick="slanje(this)"><img src="img/beli_top.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_konj.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_lovac.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_kralji.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_kraljica.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_lovac.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_konj.png" class="figura"></td>
        <td onclick="slanje(this)"><img src="img/beli_top.png" class="figura"></td>
    </tr>
</table>
<div id="igrac"></div>
<div id="igra"></div>
<script>
    var ja="";
    var socket = io.connect();

function slanje(el) {

    socket.emit('send message',el.cellIndex+'-'+el.parentNode.rowIndex);
}
socket.on('new message', function (data) {

        pozicija(data.msg.split('-')[1], data.msg.split('-')[0]);
    for(var i=0;i<8;i++)
    {
        for(var j=0;j<8;j++)
        {
            if(document.getElementById('tabla').rows[i].cells[j].innerHTML!="" && document.getElementById('tabla').rows[i].cells[j].getElementsByTagName('img')[0].src.split('/')[document.getElementById('tabla').rows[i].cells[j].getElementsByTagName('img')[0].src.split('/').length-1].split('_')[0]!=pl  )
            {
                document.getElementById('tabla').rows[i].cells[j].style.pointerEvents="none";
            }
        }
    }
    });
    socket.on('setpl',function(data){


        pl=data.msg;
        document.getElementById('igrac').innerHTML="Vi ste:"+pl;
        for(var i=0;i<8;i++)
        {
            for(var j=0;j<8;j++)
            {
                if(document.getElementById('tabla').rows[i].cells[j].innerHTML!="" && document.getElementById('tabla').rows[i].cells[j].getElementsByTagName('img')[0].src.split('/')[document.getElementById('tabla').rows[i].cells[j].getElementsByTagName('img')[0].src.split('/').length-1].split('_')[0]!=pl  )
                {
                    document.getElementById('tabla').rows[i].cells[j].style.pointerEvents="none";
                }
            }
        }
    });


    </script>
</body>
</html>